# MODBUS-RTU Command

## Register Table

| Register | Read and Write | Parameter Meaning    | Instruction                                                | Remark                                                                                                                                                            |
| -------- | -------------- | -------------------- | ---------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 0x0001   | R/-            | empty height         | 01 03 00 01 00 01 D5 CA                                    | Unitmm, filtered data                                                                                                                                             |
| 0x0003   | R/-            | water level          | 01 03 00 03 00 01 74 0A                                    | Unitmm, filtered data                                                                                                                                             |
| 0x0005   | R/W            | installation height  | 01 03 00 05 00 01 94 0B<br>01 06 00 05 [AA] [BB] [CC] [DD] | Unit: cm Distance from radar to water bottom, water level equal to installation height minus Go high. To read the water level, first set the installation height. |
| 0x3F4    | R/W            | device address       | 01 03 03 F4 00 01 C5 BC<br>01 06 03 F4 [AA] [BB] [CC] [DD] | Range: 0x01 - 0xFD Broadcast support 0xFF                                                                                                                         |
| 0x3F6    | R/W            | baud rate adjustment | 01 03 03 F6 00 01 64 7C<br>01 06 03 F6 [AA] [BB] [CC] [DD] | 48 96 144 192 384 560 576 1152 1290<br>Read, write baud rate, actual baud rate/100                                                                                |
| 0x07D4   | R/W            | range                | _01 03 07 D4 00 01 C5_ 46<br>01 06 07 D4 00 [AA] [BB] [CC] | Default: 0X0A, unit mMaximum range is related to product model                                                                                                    |

## Other Notes

1. Read and write function code 03,write single register 06, default address is: 1

2. Data format: 8N1 validation: CRC16 (polynomial A001)

3. The above register numbers are decimal and need to be converted to hexadecimal. To operate these registers via MODBUS protocol, for example, to open field search mode, we need to send 01 06 07 DB 00 05 38 86

**Byte Structure:**

- First byte: device address
- Second byte: function code
  - 0x03: Read register value
  - 0x06: Overwrite register value
- Third byte: register address
- Byte five or six, function code bit 0x03: Number of registers to be read
- Function code bit 0x06: Data to be stored in registers
- 7th byte: CRC check

When we need to write registers, there will be [AA] [BB] [CC] [DD] parameters, and the values of these parameters need to be determined according to requirements.

## Examples

Example 1: Read empty high:Send 01 03 00 01 00 01 D5 CAcommand
Back01030200 30 B8 50
01: Equipment address number
03: Read function code
02: Number of data bytes
00 30:Get the filtered null high valuehexadecimal number, need to convert
todecimal48mm
B8 50: Checkpoint code
Example2: Write 1000cminstallation height:Send010600 0503 E899 75command
01: Equipment address number
06: Write function code
00 05: Register address
03E8:hex write installation height value(decimal1000to hexis 03E8)
99 75: Check Code
Write successfully will return the corresponding command received: 01 06 00 05 03 E8 99
75
Example 3: Change the device address to 02:Send01 06 03 F4 00 02 49 BDcommand
Return02 06 03 F4 00 02 49 8Ecommand
02: is the address of the new device. To use other instructions later, the
address number of the device needs to be changed to02.
For example, to query the address of a new device, it is necessary to send02
03 00 01 00 01D5 F9check code.
Example 4:115200baud rate changed to 9600
Send 01 06 03 F6 00 60 69 94 command
Return 01 06 03 F600 60 69 94Instruction
Read, write baud rate, actual baud rate/100
(then 9600is 96) decimal 96conversion =
hexadecimal 60
So write 00 60
After successfully changing the baud rate, you need to adjust the baud rate
of the serial debugging assistant to the corresponding changed baud rate.
